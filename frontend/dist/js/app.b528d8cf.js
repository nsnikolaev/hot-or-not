(function(t){function e(e){for(var s,r,c=e[0],a=e[1],u=e[2],h=0,p=[];h<c.length;h++)r=c[h],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&p.push(n[r][0]),n[r]=0;for(s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s]);l&&l(e);while(p.length)p.shift()();return o.push.apply(o,u||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],s=!0,c=1;c<i.length;c++){var a=i[c];0!==n[a]&&(s=!1)}s&&(o.splice(e--,1),t=r(r.s=i[0]))}return t}var s={},n={app:0},o=[];function r(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=s,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(i,s,function(e){return t[e]}.bind(null,s));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],a=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=a;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"14b3":function(t,e,i){"use strict";var s=i("fe0a"),n=i.n(s);n.a},1684:function(t,e,i){"use strict";var s=i("6cb1"),n=i.n(s);n.a},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var s=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("cPhotoSelector"),t._v(" "),i("cHeader")],1)},o=[],r=i("5530"),c=i("2f62"),a=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},u=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Header"},[s("img",{staticClass:"logo",attrs:{src:i("e347")}})])}],l={name:"Header"},h=l,p=(i("14b3"),i("2877")),m=Object(p["a"])(h,a,u,!1,null,null,null),d=m.exports,f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"PhotoSelector"},[i("div",{staticClass:"photos-wrap"},[t.canRestart?i("div",{staticClass:"_fullsize"},[i("button",{staticClass:"button-restart",on:{click:t.restart}},[t._v("Запустить снова...")])]):t._e(),t._l(t.photoListReversed(),(function(e,s){return i("cPhoto",{key:"photo-"+s,attrs:{index:s,url:e},on:{solved:t.solved}})}))],2)])},v=[],g=i("2909"),b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cPhoto _fullsize",class:{like:t.isLike,dislike:t.isDislike},attrs:{id:"photo-"+t.index}},[i("div",{staticClass:"image _fullsize",style:{backgroundImage:"url("+t.url+")"}}),i("div",{staticClass:"selector"},[i("div",{staticClass:"selector-wrap"},[i("div",{staticClass:"selector-item"},[i("div",{staticClass:"selector-item-wrap button-like",on:{mousedown:t.dislike}},[i("eButtonsRate",{attrs:{type:"dislike"}})],1)]),i("div",{staticClass:"selector-item"},[i("div",{staticClass:"selector-item-wrap button-dislike",on:{mousedown:t.like}},[i("eButtonsRate",{attrs:{type:"like"}})],1)])])])])},w=[],k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"eButtonsRate"},["like"===t.type?s("img",{attrs:{src:i("9f80")}}):t._e(),"dislike"===t.type?s("img",{attrs:{src:i("6367")}}):t._e()])},L=[],S={name:"eButtonsRate",props:["type"]},P=S,_=(i("ae41"),Object(p["a"])(P,k,L,!1,null,null,null)),O=_.exports,y={props:["index"],data:function(){return{elPhoto:null,elImage:null,mousePositionStart:null,mousePositionCurrent:0,isSwiped:!1,isLike:!1,isDislike:!1}},methods:{swipeStart:function(t){t.clientX&&(this.mousePositionStart=t.clientX),t.changedTouches&&t.changedTouches.length>0&&(this.mousePositionStart=t.changedTouches[0].clientX)},swipe:function(t){this.isSwiped=!0,t.clientX&&(this.mousePositionCurrent=t.clientX),t.changedTouches&&t.changedTouches.length>0&&(this.mousePositionCurrent=t.changedTouches[0].clientX),null!==this.mousePositionStart&&(this.elPhoto.style.marginLeft="".concat(this.mousePositionCurrent-this.mousePositionStart,"px"))},swipeStop:function(){this.isLike=!1,this.isDislike=!1;var t=100*(this.mousePositionCurrent-this.mousePositionStart)/this.elPhoto.clientWidth;this.mousePositionStart=null,t>=15&&this.isSwiped?(this.isLike=!0,this.swipeClearEvents()):t<=-15&&this.isSwiped&&(this.isDislike=!0,this.swipeClearEvents()),this.isSwiped=!1,this.elPhoto.removeAttribute("style"),this.mousePositionStart=null},swipeSetEvents:function(){this.elPhoto.addEventListener("touchstart",this.swipeStart),this.elPhoto.addEventListener("touchmove",this.swipe),this.elPhoto.addEventListener("touchend",this.swipeStop),this.elImage.addEventListener("mousedown",this.swipeStart),this.elImage.addEventListener("mouseup",this.swipeStop),this.elImage.addEventListener("mousemove",this.swipe)},swipeClearEvents:function(){this.elPhoto.removeEventListener("touchstart",this.swipeStart),this.elPhoto.removeEventListener("touchmove",this.swipe),this.elPhoto.removeEventListener("touchend",this.swipeStop),this.elImage.removeEventListener("mousedown",this.swipeStart),this.elImage.removeEventListener("mouseup",this.swipeStop),this.elImage.removeEventListener("mousemove",this.swipe)}},mounted:function(){var t="photo-".concat(this.index);this.elPhoto=document.querySelector("#".concat(t)),this.elImage=document.querySelector("#".concat(t," .image")),this.swipeSetEvents()},beforeDestroy:function(){this.swipeClearEvents()}},E={name:"cPhoto",props:["index","url"],mixins:[y],data:function(){return{buttonLike:null,buttonDislike:null,isLike:!1,isDislike:!1}},components:{eButtonsRate:O},methods:{like:function(){!1===this.isLike&&!1===this.isDislike&&(this.isLike=!0)},dislike:function(){!1===this.isLike&&!1===this.isDislike&&(this.isDislike=!0)},setEvents:function(){this.buttonLike.addEventListener("mousedown",this.like),this.buttonDislike.addEventListener("mousedown",this.dislike)},cliarEvents:function(){this.buttonLike.removeEventListener("mousedown",this.like),this.buttonDislike.removeEventListener("mousedown",this.dislike)}},watch:{isLike:function(t){var e=this;t&&setTimeout((function(){e.$store.dispatch("cPhotoSelector/shift"),e.$emit("solved",!0)}),400)},isDislike:function(t){var e=this;t&&setTimeout((function(){e.$store.dispatch("cPhotoSelector/shift"),e.$emit("solved",!1)}),400)}},mounted:function(){this.buttonLike=document.querySelector(".button-like"),this.buttonDislike=document.querySelector(".button-dislike"),this.setEvents()},beforeDestroy:function(){this.cliarEvents()}},j=E,C=(i("c096"),Object(p["a"])(j,b,w,!1,null,null,null)),x=C.exports,T={name:"PhotoSelector",data:function(){return{canRestart:!1}},components:{cPhoto:x},computed:Object(r["a"])({},Object(c["b"])("cPhotoSelector",["photoList"])),methods:{photoListReversed:function(){return Object(g["a"])(this.photoList).reverse()},solved:function(t){},restart:function(){this.$store.dispatch("cPhotoSelector/restart")}},watch:{photoList:{handler:function(t){t.length>0&&(this.canRestart=!0)},immediate:!0}}},R=T,D=(i("1684"),Object(p["a"])(R,f,v,!1,null,null,null)),I=D.exports,H={name:"App",components:{cHeader:d,cPhotoSelector:I},computed:Object(r["a"])({},Object(c["b"])("cPhotoSelector",["photoList"])),created:function(){0===this.photoList.length&&this.$store.dispatch("cPhotoSelector/fetch")}},$=H,A=(i("5c0b"),Object(p["a"])($,n,o,!1,null,null,null)),X=A.exports,B={},F={},M={},q={},N={namespaced:!0,state:B,getters:F,actions:M,mutations:q},z={},J={},W={},Y={},G={namespaced:!0,state:z,getters:J,actions:W,mutations:Y},K=(i("99af"),i("96cf"),i("1da1")),Q=(i("fb6a"),["http://localhost:4000/image/000.jpg","http://localhost:4000/image/001.jpg","http://localhost:4000/image/002.jpg","http://localhost:4000/image/003.jpg","http://localhost:4000/image/004.jpg","http://localhost:4000/image/005.jpg","http://localhost:4000/image/006.jpg","http://localhost:4000/image/007.jpg","http://localhost:4000/image/008.jpg","http://localhost:4000/image/009.jpg"]),U=function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(e,i){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=[].concat(Q).slice(e,e+i),t.abrupt("return",s);case 2:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}(),V={imageList:U},Z={photoList:[],fetchFrom:0,packetLength:4},tt={},et={fetch:function(t){return Object(K["a"])(regeneratorRuntime.mark((function e(){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.commit,e.next=3,V.imageList(Z.fetchFrom,Z.packetLength);case 3:s=e.sent,i("PHOTO_LAST_INDEX_ADD",s.length),i("PHOTO_LIST_CONCAT",s);case 6:case"end":return e.stop()}}),e)})))()},shift:function(t){return Object(K["a"])(regeneratorRuntime.mark((function e(){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.commit,s=t.dispatch,e.next=3,i("PHOTO_LIST_SHIFT");case 3:Z.photoList.length/Z.packetLength<=.5&&s("fetch");case 4:case"end":return e.stop()}}),e)})))()},restart:function(t){return Object(K["a"])(regeneratorRuntime.mark((function e(){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.commit,s=t.dispatch,e.next=3,i("CLEAR");case 3:s("fetch");case 4:case"end":return e.stop()}}),e)})))()}},it={PHOTO_LIST_CONCAT:function(t,e){return t.photoList=t.photoList.concat(e)},PHOTO_LIST_SHIFT:function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.photoList.shift());case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),PHOTO_LAST_INDEX_ADD:function(t,e){return t.fetchFrom+=e},CLEAR:function(t){t.photoList=[],t.fetchFrom=0}},st={namespaced:!0,state:Z,getters:tt,actions:et,mutations:it};s["a"].use(c["a"]);var nt=!1,ot=new c["a"].Store({modules:{App:N,cHeader:G,cPhotoSelector:st},strict:nt});ot.subscribe((function(t,e){"app/SYMBOL"===t.type&&localStorage.setItem("symbol",t.payload)}));var rt=ot;s["a"].config.productionTip=!1,new s["a"]({store:rt,render:function(t){return t(X)}}).$mount("#app")},"5c0b":function(t,e,i){"use strict";var s=i("9c0c"),n=i.n(s);n.a},6367:function(t,e,i){t.exports=i.p+"img/dislike.e5f888ac.svg"},"6cb1":function(t,e,i){},"9c0c":function(t,e,i){},"9f80":function(t,e,i){t.exports=i.p+"img/like.c0b18461.svg"},ae41:function(t,e,i){"use strict";var s=i("fe29"),n=i.n(s);n.a},c096:function(t,e,i){"use strict";var s=i("ccbf"),n=i.n(s);n.a},ccbf:function(t,e,i){},e347:function(t,e,i){t.exports=i.p+"img/logo.94a2de28.svg"},fe0a:function(t,e,i){},fe29:function(t,e,i){}});
//# sourceMappingURL=app.b528d8cf.js.map